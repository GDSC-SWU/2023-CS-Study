# 2.1 네트워크의 기초

  * 네트워크: 노드와 링크가 서로 연결되어 있어 리소스를 공유하는 집합
  * 노드: 서버, 라우터, 스위치 등 네트워크 장치
  * 링크: 유/무선 연결<br>
  
## 2.1.1 처리량과 지연 시간

  * 좋은 네트워크: 많은 처리량을 지연 시간이 짧고 빈도가 적으면서 좋은 보안을 갖춘 네트워크
  
  * ### 처리량
    : 링크 내에서 성공적으로 전달된 데이터의 양 (얼만큼의 트래픽을 처리했는지)
    * 단위: bps(초당 전송, 수신되는 비트 수)
    * 사용자들이 접속할 때마다 커지는 트래픽, 네트워크 장치 간의 대역 폭, 에러, 하드웨어 스펙의 영향 받음
    * 트래픽이 많아졌다 = 흐르는 데이터가 많아졌다
    * 처리량이 많아졌다 = 처리되는 트래픽이 많아졌다
   
  * ### 지연시간
    : 요청이 처리되는 시간 -> 두 장치 사이를 왕복하는 데 걸린 시간
    * 매체 타입(유/무선), 패킷 크기, 라우터의 패킷 처리 시간의 영향 받음<br>
   
 ## 2.1.2 네트워크 토폴로지와 병목 현상
 
  * ### 네트워크 토폴로지
    : 노드와 링크의 배치 방식, 연결 형태
    
   * #### 트리 토플로지
     : 계층형 토폴로지 -> 트리형태
     * 노드의 추가, 삭제가 쉬움
     * 특정 노드에 트래픽 집중 -> 하위 노드에 영향 끼칠 수 있음
     
   * #### 버스 토플로지
     : 중앙 통신 회선 하나에 여러 개의 노드 연결되어 공유하는 네트워크 구성
     * 근거리 통신망(LAN)
     * 노드의 추가, 삭제가 쉬움
     * 설치 비용 적고 신뢰성 우수
     * 스푸핑 가능
       * 스푸핑: 송신부의 패킷을 송신과 관련 없는 다른 호스트에 가지 않도록 하는 스위치 기능 마비/속임 -> 특정 노드에 패킷 오게 처리
       
   * #### 스타 토플로지
     : 중앙에 있는 노드에 모두 연결
     * 노드의 추가, 에러 탐지 쉬움
     * 장애 노드가 중앙 노드에 영향 낮음
     * 중앙 노드 장애 시 전체 사용 불가

   * #### 링형 토플로지
     : 각각의 노드가 양 옆의 두 노드와 연결
     * 노드 수가 증가되어도 손실 거의 없고, 충돌 방생 가능성 적음
     * 네트워크 구선 변경이 어려움

   * #### 메시 토플로지
     : 그물망 연결
     * 하나에 장애가 생겨도 여러 경로가 존재하기 때문에 네트워크 계속 사용 가능
     * 트래픽 분산 처리 가능

  * ### 병목현상
    : 전체 시스템의 성능이나 용량이 하나의 구성요소로 인해 제한을 받는 현상
    * 주원인
      - 네트워크 대역폭
      - 네트워크 토폴로지
      - 서버 CPU, 메모리 사용량
      - 비효율적인 네트워크 구성
    
 ## 2.1.3. 네트워크 분류
 
  * ### LAN(Local Area Network) : 건물, 캠퍼스
  * ### MAN(Metropolitan Area Network) : 대도시  
  * ### WAN(Wide Area Network) : 국가, 대륙
    
 ## 2.1.4 네트워크 성능 분석 명령어
 
  * ### PING
    : 네트워크 상태 확인하려는 대상 노드를 향해 일정 크기의 패킷 전송 명령어
     * 해당 노드의 패킷 수신 상태와 도달하기까지의 시간, 해당 노드까지 잘 연결되어 있는지 확인 가능
     * TCP/IP 중 ICMP 프로토콜로 동작
    
  * ### netstat
    : 접속되어 있는 서비스들의 네트워크 상태 표시
     * 네트워크 접속, 라우팅 테이블, 네트워크 프로토콜 등 리스트 보여줌
     * 서비스 포트 열려있는 지 확인할 때 사용

  * ### nslookup
    : DNS 관련 내용 확인용 명령어
     * 특정 도메인에 매핑된 IP확인하기 위해 사용

  * ### tracert
    : 목적지 노드까지 네트워크 경로 확인용 명령어
     * 목적지 노드까지 구간들 중 어느 구간에서 응답 시간이 느려지는 지 확인

# 2.2 TCP/IP 4계층 

 ## 2.2.1 계층 구조

  * 애플리케이션 계층 -> 애플리케이션, 프레젠테이션, 세션 계층
  * 인터넷 계층 -> 네트워크 계층
  * 특정 계층이 변경되어도 다른 계층이 영향 안받음
 
   * ### 애플리케이션 계층
     * FTP: 장치와 장치 간의 파일 전송할 때
     * SSH: 보안되지 않은 네트워크에서 네트워크 서비스를 안전하게 운영하기 위한 암호화 네트워크 프로토콜
     * HTTP: WWW를 위한 데이터 통신의 기초이자 웹 사이트를 이용할 때
     * SMTP: 전자 메일 전송을 위한 인터넷 표준 통신 프로토콜
     * DNS: 도메인 이름과 IP주소 매핑

   * ### 전송 계층
     * 송신자와 수신자를 연결하는 통신 서비스 제공
     * 애플리케이션 계층과 인터넷 계층 사이의 데이터가 전달될 때 중계 역할
     * TCP -> 가상회선 패킷 교환 방식: 패킷 사이 순서 보장하고 연결지향 프로토콜 사용
     * UDP -> 데이터그램 패킷 교환 방식: 순서 보장하지 않고 수신 여부 확인 안함
    
   * #### 가상회선 패킷 교환 방식
     : 각 패킷에 가상 회선 식별자가 포함되며 모든 패킷을 전송하면 가상회선 해제 -> 순서대로 도착
     * 노드의 추가, 삭제가 쉬움
     * 특정 노드에 트래픽 집중 -> 하위 노드에 영향 끼칠 수 있음

   * #### 데이터그램 패킷 교환 방식
     : 패킷이 독립적으로 이동하며 최적의 경로를 선택 -> 분할된 여러 패킷을 서로 다른 경로로 전송 => 순서가 다르게 도착할 수 있음
     
   * #### TCP 연결 성립 과정
     : 3-웨이 핸드셰이크
     1. SYN 단계: 클라이언트가 서버에 ISN을 담아 SYN보냄(ISN: 새로운TCP 연결의 첫번째 패킷에 할당된 이의의 시퀀스 번호)
     2. SYN + ACK 단계: 서버는 클라이언트의 SYN 수신 & 서버의 ISN 보냄 -> 승인번호 = ISN+1
     3. ACK 단계: 클라이언트는 서버의 ISN+1 한 값인 승인번호를 담아 ACK 전달

   * #### TCP 연결 해제 과정
     : 4-웨이 핸드셰이크
     1. 클라이언트가 닫으려고 할 떄 FIN으로 설정된 세그먼트 전송 & 클라이언트는 FIN_WAIT_1 상태로 들어가고 서버 응답 기다림
     2. 서버는 클라이언트로 ACK승인 세그먼트 보냄 & CLOSE_WAIT 상태가 됨 & 클라이언트가 세그먼트 받으면 FIN_WAIT_2 상태가 됨
     3. 서버는 ACK를 보내고 일정 시간 뒤에 클라이언트에게 FIN이라는 세그먼트 보냄
     4. 클라이언드는 TIME_WAIT 상태가 되고 다시 서버로 ACK 보내서 서버는 CLOSED상태가 됨<br>
     
     * TIME_WAIT이 있는 이유
       * 지연패킷이 방생할 경우 대비
       * 두 장치의 연결이 닫혔는지 확인하기 위함

  * ### 인터넷 계층
    * 장치로부터 받은 네트워크 패킷을 IP주소로 지정된 목적지로 전송하기 위해 사용
    * 패킷을 수신해야 할 상대의 주소를 지정하여 데이터 전달
    * 상대방이 제대로 받았는지에 대해 보장하지 않는 비연결형적인 특징

  * ### 링크 계층
    * 전선, 광섬유, 무선 등 실질적으로 데이터 전달 & 장치 간의 신호를 주고받는 "규칙" 정함
    * 물리계층: 무선 LAN과 유선 LAN을 통해 0과 1로 이루어진 데이터 보내는 계층
    * 데이터 링크 계층: 이더넷 프레임을 통해 에러 확인, 흐름 제어, 접근 제어 담당

   * #### 전이중화 통신
     : 양쪽 장치가 동시에 송수신 가능
     * 송신로와 수신로로 나워서 데이터를 주고받음

   * #### CSMA/CD (반이중화 통신)
     : 보낸 뒤 충돌이 발생하면 일정 시간 이후 재전송하는 방식
     * 경로가 하나이기 때문에 충돌에 대비해야함

   * #### 트위스트 페어 케이블
     : 여덟개의 구리선을 두개씩 꼬아서 묶은 케이블
     
   * #### 광섬유 케이블
     : 레이저로 통신 -> 장거리 & 고속 통신 가능
     * 코어: 굴절률 높은 부분
     * 클래딩: 굴절률 낮은 부분

   * #### CSMA/CA (반이중화 통신)
     1. 데이터를 송신하기 전 무선 매체 살핌
     2. 캐리어 감지: 회선이 비어 있는 지 확인
     3. IFS(Inter FrameSpace): 랜덤으로 정해진 시간만큼 기다리며, 사용 중이면 그 간격을 늘려가며 기다림
     4. 데이터 송신

   * #### 와이파이
     : 전자기기들이 무선 LAN 신호에 연결할 수 있게 하는 기술
     * 무선 접속 장치 AP(공유기) 필요함
     * 유선 LAN에 흐르는 신호를 무선 LAN 신호로 바꿔 신호가 닿는 범위 내에서 무선 인터넷 사용 가능

   * #### BSS
     : 기본 서비스 집합 -> 단순 공유기 접속 X 동일 BSS 내에 있는 AP들과 장치들이 서로 통신이 가능한 구조
     
     * 근거리 통신 제공

   * #### ESS
     : 하나 이상 연결된 BSS그룹
     * 장거리 무선 통신 제공

   * #### 캡슐화 과정
     : 상위 계층의 헤더와 데이터를 하위 계층의 데이터 부분에 포함하고 해당 계층의 헤더 삽입하는 과정
     
   * #### 비캡슐화 과정
     : 하위 계층에서 상위 계층으로 가며 각 계층의 헤더 제거하는 과정

# 2.3 네트워크 기기

## 2.3.1 네트워크 기기의 처리 범위
  * 상위 계층은 하위 계층을 처리할 수 있지만 하위 계층은 상위 계층 처리 불가능
 
## 2.3.2 애플리케이션 계층을 처리하는 기기 
  * ### L7 스위치
    * 스위치: 여러 장비를 연결하고 데이터 통신을 중재하며 목적지다 연결된 포트로만 전기 신호 보내 데이터를 통신하는 네트워크 장비
    * 로드밸런서 -> 서버의 부하를 분산하는 기기
    * 헬스 체크를 통해 장애가 발생한 서버를 트래픽 분산 대상에서 제외
   * #### L4 스위치와 L7 스위치의 차이
     * L4: 전송 계층을 처리하는 기기 -> 스트리밍 관련 서비스 이용 불가 & IP와 포트를 기반으로 트래픽 분산
     * L7: IP, 포트, URL, HTTP 헤더, 쿠키 등으로 트래픽 분산
   * #### 헬스 체크
     * 전송 주기와 재전송 횟수 등을 설정한 이후 반복적으로 서버에 요청
     * 서버에 과부화 되지 않게 요청 횟수 적절해야 함
   * #### 로드 밸런서를 이용한 서버 이중화
     * 안정적인 서버를 운용하기 위해 2대 이상의 서버 필요
     * 가상의 IP를 제공하고 이를 기반으로 안정적인 서비스 제공

## 2.3.3 인터넷 계층을 처리하는 기기
  * ### 라우터
    : 여러개의 네트워크 연결, 분할, 구분시켜주는 역할
    * 패킷 소모를 최소화하고 경로를 최적화하여 최소 경로로 패킷을 포워딩
   * ### L3 스위치
     : L2 스위치의 기능과 라우팅 기능을 갖춘 장비
     * 하드에어 기반 라우팅

## 2.3.4 데이터 링크 계층을 처리하는 기기
  * ### L2 스위치
    * MAC 주소를 MAC 주소 테이블을 통해 관리
    * 연결된 장치로 패킷이 왔을 떄 패킷 전송 담당
    * IP 주소 이해 못함 -> IP 주소 기반 라우팅 불가능 & MAC 주소를 읽어 스위칭하는 역할
   * ### 브리지
     * LAN을 상호 접속할 수 있도록 하는 통신망 연결 장치
     * 포트와 포트 사이의 다리 역할

## 2.3.5 물리 계층을 처리하는 기기
  * ### NIC
    : LAN 카드라고하는 인터페이스 카드(NIC, Network Interface Card)
    * 2대 이상의 컴퓨터 네트워크 구성하는데 사용
    * 네트워크와 빠른 속도로 데이터 송수신 할 수 있도록 컴퓨터 내에 설치하는 확장카드
  * ### 리피터
    : 들어오는 약해진 신호 정도를 증폭하여 다른 쪽으로 전달하는 장치
  * ### AP
    : 패킷 복사하는 기기
    * AP에 유선 LAN을 연결한 후 다른 장치에서 무선 LAN 기술 사용하여 무선 네트워크 연결 
