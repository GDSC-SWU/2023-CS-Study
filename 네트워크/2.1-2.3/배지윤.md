# 2.1 네트워크의 기초

 👩🏻‍💻 What is Network? 👩🏻‍💻
 <br>
: 노드(node)와 링크(link)가 서로 연결되어 리소스를 공유하는 집합니다.
<br>
→ 노드(node): e.g. 서버, 라우터, 스위치 등 네트워크 장치
<br>
→ 링크(link): 유선 또는 무선이 될 수 있다.

## 처리량과 지연 시간
'좋은' 네트워크: 많은 처리량 처리 가능, 지연 시간 ↓, 장애 빈도 ↓, 좋은 보안을 갖춘 네트워크

 👩🏻‍💻 What is Throughput(처리량)? 👩🏻‍💻
<br>
: 링크 내에서 성공적으로 전달된 데이터의 양 (= 얼만큼의 트래픽을 처리했는 지 나타냄)
<br>
e.g. 많은 트래픽을 처리한다 = 많은 처리량을 가진다
* 단위: bps (초당 전송 또는 수신되는 비트 수)
* 사용자 수에 따른 트래픽, 네트워크 장치 간의 대역폭, 에러, 장치의 하드웨어 스펙에 영향을 받음
* 트래픽 vs 처리량
  *  트래픽이 많아졌다 = 흐르는 데이터가 많아졌다
  *  처리량이 많아졌다 = 처리되는 트래픽이 많아졌다
*  대역폭: 주어진 시간 동안 네트워크 연결을 통해 흐를 수 있는 최대 비트 수

 👩🏻‍💻 What is Latency(지연 시간)? 👩🏻‍💻
 <br>
 : 요청이 처리되는 시간 (= 어떤 메시지가 두 장치 사이를 왕복하는 데 걸린 시간)
 * 매체 타입(무선,유선), 패킷 크기, 라우터의 패킷 처리 시간에 영향을 받음
 
 ## 네트워크 토폴로지와 병목 현상
  👩🏻‍💻 What is Network topology(토폴로지)? 👩🏻‍💻
  <br>
  : 노드와 링크가 어떻게 배치되어 있는 지에 대한 방식이자 연결 형태
  <br>
  * 트리 토폴로지 
    * 계층형 토폴로지
    * 장점
      *  네트워크의 확장이 쉽고, 관리도 편하다
      *  통신 선로가 짧고, 통신 회선수가 절약된다
    *  단점
        *  상위 회선에 문제가 생기면 하위 회선 모두 문제가 생긴다
        *  네트워크 확장이 많아지면 트래픽이 집중되기도 한다
   <p align="center">
  <img width="189" alt="Screenshot 2023-05-27 at 3 11 07 PM" src="https://github.com/GDSC-SWU/2023-CS-Study/assets/63540652/e1415792-6e48-44a3-a3f5-736a450085f3">
  </p>
  
  * 버스 토폴로지
    *  중앙 통신 회선 하나에 여러 개의 노드가 연결되어 공유하는 네트워크 구성
    *  주로 근거리 통신망(LAN)에서 사용된다</br>
    → LAN: 광대역 통신망과는 달리 학교, 회사, 연구소 등 한 건물이나 일정 지역 내에서 컴퓨터나 단말기들을 고속 정송 회선으로 연결
    
    *  장점
        * 구축이 쉽고, 하나의 케이블에 연결되기 때문에 설치 비용이 저렴하다
        * 하나의 컴퓨터에 문제가 생겨도 다른 컴퓨터 간의 데이터 통신에 영향을 주지 않는다
        * 관리와 확장이 쉽다 (중앙 통신 회선에 노드를 추가/삭제가 쉬움)
        * 신뢰성이 우수하다
    * 단점
      *  동시에 컴퓨터 간의 통신이 불가능하다
      *  문제 처리가 어렵고, 시간도 오래 걸린다 (e.g. 어떤 장치에 문제가 생겼는 지 모르기 때문에 일일이 찾아야 함)
      *  스푸핑이 가능하다 </br>
      → LAN 상에서 송신부의 패킷을 송신과 관련 없는 다른 호스트에 가지 않도록 하는 스위칭 기능을 마비시키거나 속여서 특정 노드에 해당 패킷이 오도록 처리하는 것을 말한다.
 <p align="center">
 <img width="168" alt="Screenshot 2023-05-27 at 3 44 03 PM" src="https://github.com/GDSC-SWU/2023-CS-Study/assets/63540652/e3ad983f-3d60-41bb-a6aa-22a4398e0e97">
 </p>
 
 * 스타 토폴로지
  * 중앙에 있는 노드에 모두 연결된 네트워크 구성 (중앙과 모든 노드들이 poin-to-point 방식으로 직접 연결되어 있음, 중앙의 노드에서 다른 노드들을 제어함)
  * 장점
    * 네트워크의 확장과 유지 보수가 쉽다
    * 장애를 발견하기 쉽고, 장애를 빠르게 처리 가능
    * 호스트(host)들이 중앙에 집중되어 관리가 쉽다
    * 패킷의 충돌 발생 가능성이 적다
  * 단점
    * 중앙에 집중되어 있기 때문에 중앙 시스템이 고장 나면 전체 시스템이 마비된다
    * 사용자가 많아지면 트래픽이 증가되어 속도가 저하된다
    * 설치 비용이 고가이다
<p align="center">
<img width="138" alt="Screenshot 2023-05-27 at 3 55 20 PM" src="https://github.com/GDSC-SWU/2023-CS-Study/assets/63540652/aab83fb0-ac02-4963-8047-08f5ebfdf36a">
</p>

* 링형 토폴로지
  * 각각의 노드가 양 옆의 두 노드와 연결하여 전체적으로 고리처럼 하나의 연속된 길을 통해 통신하는 망 구성 방식
  * 장점
    * 설치 비용이 저렴하다
    * 노드 수가 증가되어도 네트워크상의 손실이 거의 없다
    * 똑같은 접속 기회를 제공하기 때문에 데이터간의 충돌이 발생되는 가능성이 적다
    * 노드의 고장 발견을 쉽게 찾을 수 있다
    * 넓은 지역에 구축이 가능하다
  * 단점
    * 네트워크 구성 변경이 어렵고 회신에 장애가 발생하면 전체 네트워크에 영향을 크게 끼치는 단점이다
    * 통신의 효율이 낮다
    * 넓은 지역에 구축이 가능하기 때문에 비용이 많이 든다
<p align ="center">
  <img width="138" alt="Screenshot 2023-05-27 at 4 25 51 PM" src="https://github.com/GDSC-SWU/2023-CS-Study/assets/63540652/df9e56f3-083a-4245-8f64-cc30ec2d74a3">
  </p>

* 메시 토폴로지 (=망형 토폴로지)
  *  그물망처럼 연결되어 있는 구조
  *  장점
    *  특정 통신 회선에 문제가 생겨도 다른 경로로 데이터 전송이 가능하다 (트래픽 분산 처리가 가능)
    *  가용성이 높고, 효율성이 좋다
  *  단점
    *  네트워크 관리, 설치 재구성이 어렵다 (노드 추가가 어렵다)
    *  많은 링크를 사용하기 때문에 설치비용이 많이 든다 (+ 운영 비용도 고가)
    
<p align="center">
<img width="138" alt="Screenshot 2023-05-27 at 4 28 00 PM" src="https://github.com/GDSC-SWU/2023-CS-Study/assets/63540652/e3df5ed4-1090-43f5-a727-b5704613465c">**
</p>

* 병목 현상 (bottleneck)
; 토폴로지가 중요한 이유는 '병목 현상'을 찾을 때 중요한 기준이 되기 때문
: 전체 시스템의 성능이나 용량이 하나의 구성 요소로 인해 제한을 받는 현상
  * 병목 현상의 원인
    * 네트워크 대역폭
    * 네트워크 토폴로지
    * 서버 CPU, 메모리 사용량
    * 비효율적인 네트워크 구성

## 네트워크 분류
* LAN (Local Area Network)
  * 사무실과 개인적으로 소유 가능한 규모
  * 전송 속도가 빠르고 혼잡하지 않음
* MAN (Metroplitan Area Network)
  * 서울시 등 시 정도의 규모
  * 전송 속도는 평균이며 LAN보다는 더 많이 혼잡
* WAN (Wide Area Network)
  * 세계 규모
  * 전송 속도는 낮으며 MAN보다 더 혼잡

## 네트워크 성능 분석 명령어
* ping (Packet INternet Groper)
  * 네트워크 상태를 확인하려는 대상 노드를 향해 일정 크기의 패킷을 전송할 때 사용하는 명령어
  * 해당 노드의 패킷 수신 상태와 도달하기까지 시간 등을 알 수 있음
  * 해당 노드까지 네트워크가 잘 연결되었는 지도 확인 가능
  * TCP/IP 프로토콜 중에서 ICMP 프로토콜을 통해 동작 → ICMP 프로토콜을 지원하지 않는 기기를 대상으로 실행 못함/ 네트워크 정책상 ICMP나 traceroute를 차단하는 대상의 경우 ping 테스팅 불가능 
  * -n 옵션을 통해 패킷 개수를 정할 수 있음
* netstat
  * 접속되어 있는 서비스들의 네트워크 상태를 표시할 때 쓰는 명령어
  * 네트워크 접속, 라우팅 테이블, 네트워크 프로토콜 등 리스트를 보여줌
  * 주로 서비스의 포트가 열려 있는 지 확인할 때 사용함
* nslookup
  * DNS에 관련된 내용을 확인하기 위해 쓰는 명령어
  * 특정 도메인에 매핑된 IP 확인을 위해 사용
* tracert
  * 윈도우: tracert/ 리눅스: traceroute
  * 목적지 노드까지 네트워크 경로를 확인할 때 사용하는 명령어
  * 목적지 노드까지 구간들 중 어느 구간에서 응답 시간이 느려지는지 등을 확인 가능

추가로, ftp(대형 파일 전송하여 태스팅), tcpdump(노드로 오고가는 패킷을 캡처) 명령어와 네트워크 분석 프로그램으로 wireshark, netmon을 사용할 수 있다.

# 2.2 TCP/IP 4계층 모델
* 인터넷 프로토콜 스위트 (internet protocol suite): 인터넷에서 컴퓨터들이 서로 정보를 주고받는 데 쓰이는 프로토콜의 집합
  * TCP/IP 4 계층 모델 또는 OSI 7계층 모델로 설명이 가능하다

## 계층 구조
<p align="center">
  <img width="654" alt="Screenshot 2023-05-27 at 5 36 25 PM" src="https://github.com/GDSC-SWU/2023-CS-Study/assets/63540652/d3f1502a-0796-417a-9bd4-bebbd6f9dae7">
  </p>
특정 계층이 변경되었을 때 다른 계층이 영향을 받지 않도록 설계됨</br>
e.g. 전송 계층에서 TCP를 UDP로 변경했다고 해서 인터넷 웹 브라우저를 다시 설치해양 하는 것은 아니듯 유연하게 설계됨 </br>

* ***Application Layer(애플리케이션 계층)***
  * FTP, HTTP, SSH, SMTP, DNS 등 응용 프로그램이 사용되는 프로토콜 계층
    * FTP: 장치와 장치 간의 파일을 전송하는데 사용되는 표준 통신 프로토콜
    * SSH: 보안되지 않은 네트워크에서 네트워크 서비스를 안전하게 운영하기 위한 암호화 네트워크 프로토콜
    * HTTP: World Wide Web을 위한 데이터 통신의 기초이자 웹 사이트를 이용하는데 쓰는 프로토콜
    * SMTP: 전자 메일 전송을 위한 인터넷 표준 통신 프로토콜
    * DNS: 도메인 이름과 IP 주소를 매핑해주는 
  * 웹 서비스, 이메일 등 서비스를 실질적으로 사용자들에게 제공하는 층
* ***Transport Layer(전송 계층)***
  * 송신자와 수신자를 연결하는 통신 서비스를 제공하며 연결 지향 데이터 스트림 지원, 신뢰성, 흐름 제어를 제공
  * 애플리케이션과 인터넷 계층 사이의 데이터가 전달될 때 '중계 역할'을 함
  * 대표적으로 TCP와 UDP가 있다
    * TCP: 패킷 사이의 순서를 보장하고 연결지향 프로토콜을 사용해서 연결 → 신뢰성 구축하여 수신 여부 확인/ '가상회선 패킷 교환 방식' 사용
      *   가상회선 패킷 교환 방식: 각 패킷에는 가상회선 식별자(VCI)가 포함되며 모든 패킷을 전송하면 가상회선이 해제되고 패킷들은 전송된 '순서대로' 도착하는 방식
          *  정해진 시간 안이나 다량의 데이터를 연속으로 보낼 때는 가상 회선 방식이 적합
          *  가상회선 방식은 경로를 설정할 때 한 번만 수행한다.
          <p align="center">
          <img width="555" alt="Screenshot 2023-05-27 at 5 52 32 PM" src="https://github.com/GDSC-SWU/2023-CS-Study/assets/63540652/929b97f0-8c35-4c24-873b-40ee21a4b58f">
          </p>
      * TCP 연결 성립 과정 (→ 신뢰성 있는 계층!)
        * 3 - way handshake
        <p align="center">
        <img width="600" alt="Screenshot 2023-05-27 at 6 01 01 PM" src="https://github.com/GDSC-SWU/2023-CS-Study/assets/63540652/954813ef-03af-4ef6-986e-fb4185e791b3">
        </p>
        1. SYN 단계: 클라이언트는 서버에 클라이언트의 ISN을 담아 SYN을 보낸다(ISN은 새로운 TCP 연결의 첫 번째 패킷에 할당된 임의의 시퀀스 번호를 의미하며, 이는 장치마다 다름)</br>
            → SYN: 연결 요청 플래그 </br>
        2. SYN + ACK 단계: 서버는 클라이언트의 SYN을 수신하고 서버의 ISN을 보내며 승인 번호로 클라이언트의 ISN+1을 보낸다 </br>
            → ACK: 응답 플래그 </br>
            → ISN: 초기 네트워크 연결할 때 할당된 32비트 고유 시퀀스 번호 </br>
        3. ACK 단계: 클라이언트는 서버의 ISN+1 한 값인 승인번호를 담아 ACK를 서버에 보낸다
      * TCP 연결 해제 과정
        *  4-way handshake
        <p align="center">
        <img width="697" alt="Screenshot 2023-05-27 at 6 12 35 PM" src="https://github.com/GDSC-SWU/2023-CS-Study/assets/63540652/4263ba00-7984-4abe-a3bf-867757365e09">
        </p> </br>
    * 1번: 연결을 닫으려할 때 클라이언트는 FIN으로 설정된 세그먼트를 보낸다. 이후, 클라이언트는 FIN_WAIT_1 상태로 들어가고 서버의 응답을 기다린다
    * 2번: 서버는 클라이언트로 ACK라는 승인 세그먼트를 보낸다. 그리고 CLOSE_WAIT 상태에 들어간다. 클라이언트가 세그먼트를 받으면 FIN_WAIT_2 상태에 들어간다
    * 3번: 서버는 ACK를 보내고 일정 시간 이후에 클라이언트에 FIN이란 세그먼트를 보낸다.
    * 4번: 클라이언트는 TIME_WAIT 상태가 되고 다시 서버로 ACK를 보내서 서버는 CLOSED 상태가 된다. 이후 클라이언트는 어느 정도의 시간을 대기한 후 연결이 닫히고 클라이언트와 서버의 모든 자원의 연결이 해제된다.
        * TIME_WAIT를 하는 이유?
            1. 지연 패킷이 발생할 경우를 대비하기 위함 </br>
            → 패킷이 뒤늦게 도달하고 이를 처리하지 못하면 '무결성 문제' 발생 (데이터 무결성: 데이터의 정확성과 일관성을 유지하고 보증하는 것)
            2. 두 장치가 연결이 닫혔는지 확인하기 위함 </br>
            → LAST_ACK 상태에서 닫히게 된다면 다시 새로운 연결을 하려 할 때, 장치는 계속해서 LAST_ACK로 되어 있기 때문에 접속 오류가 나타날 것이다
  

    * UDP: 순서를 보장하지 않고 수신 여부를 확인하지 않으며 단순히 데이터만 주는 '데이터그램 패킷 교환 방식'을 사용
      * 데이터그램 패킷 교환 방식: 패킷이 독립적으로 이동하며 최적의 경로를 선택하여 간다 → 하나의 메시지에서 분할된 여러 패킷은 서로 다른 경로로 전달될 수 있으며, 도착한 '순서가 다를 수' 있다. (비연결 지향형)
        *  짧은 메시지의 일시적인 전송에는 데이터그램 방식이 적합
        *  네트워크 내의 한 노드가 다운되면 데이터그램 방식은 다른 경로를 새로 설정
        <p align="center">
  <img width="650" alt="Screenshot 2023-05-27 at 5 56 14 PM" src="https://github.com/GDSC-SWU/2023-CS-Study/assets/63540652/6d5223f7-63f4-4f4b-8437-64143873372c">
  </p>
  
* ***Internet Layer(인터넷 계층)***
  * 장치로부터 받은 네트워크 패킷을 IP 주소로 지정된 목적지로 전송하기 위해 사용되는 계층
  * IP, ARP, ICMP 등이 있고, 패킷을 수신해야 할 상대 주소를 지정하여 데이터를 전달
  * 상대방이 제대로 받았는 지 보장 X → 비연결혈적인 특징이 있다
 
* ***Link Layer (링크 계층 = 네트워크 접근 계층)***
  * 전선, 광섬유, 무선 등으로 실질적으로 데이터를 전달하며 장치 간에 신호를 주고 받는 '규칙'을 정하는 계층
  * 링크 계층을 물리 계층과 데이터 링크 계층으로 나누기도 한다.
    * 물리 계층: 무선 LAN과 유선 LAN을 통해 0과 1로 이루어진 데이터를 보내는 계층
    * 데이터 링크 계층: '이더넷 프레임'을 통해 에러 확인, 흐름 제어, 접근 제어를 담당하는 계층
    ---
    * 유선 LAN (IEEE802.3)
      *  전이중화(full duplex) 통신
        *  양쪽 장치가 동시에 송수신할 수 있는 방식
        *  송신로와 수신로로 나눠서 데이터를 주고받으며 현대의 고속 이더넷은 이 방식을 기반으로 통신
        *  이전에는 '반이중화 통신' 방식 중 하나인 CSMA/CD 방식 사용
              *  데이터를 '보낸 이후' 충돌이 발생한다면 일정 시간 이후 재전송하는 방식 (→ 수신로와 송신로를 각각 둔 것이 아니고 한 경로를 기반으로 데이터 보내므로 충돌 대비해야 하기 때문)
        *  유선 LAN을 이루는 케이블
              *  TP 케이블이라고 하는 '트위스트 페어 케이블'과 '광섬유 케이블'이 대표적
              *  트위스트 페어 케이블: 8개의 구리선을 두 개씩 꼬아서 묶은 케이블 (실드 처리 O: STP, 실드 처리 X: UTP)
              *  광섬유 케이블: 광섬유로 만든 케이블, 레이저 사용 → 구리선과는 비교할 수 없을만큼 장거리 및 고속 통신이 가능 (광섬유 내부와 외부를 다른 밀도를 가진 섬유로 제작하여 계속 반사하며 전진하게 함)
              (+) 굴절률이 높은 부분: 코어(core), 낮은 부분: 클래딩(cladding)
    * 무선 LAN (IEEE802.11)
      * 수신과 송신에 같은 채널 사용 → 반이중화 통신 사용
      *  반이중화 통신 (half duplex): 
        * 양쪽 장치는 서로 통신이 가능하지만, 동시에는 통신할 수 없다. (한 번에 한 방향만 통신 가능)
        * 둘 이상의 장치가 동시에 전송하면 충돌이 발생하여 메시지가 손실되거나 왜곡될 수 있음 → 충돌 방지 시스템 필요
        * CSMA/CA는 반이중화 통신 중 하나로, 장치에서 데이터를 보내기 전에 캐리어 감지 등으로 사전에 가능한 한 충돌 방지함
      * 와이파이: 사용하기 위해서는 AP(무선 접속 장치 == 공유기) 필요 (유선 LAN 신호 → 무선 LAN 신호로 바꿈)
      * BSS: 기본 서비스 집합, 단순 공유기를 통해 네트워크에 접속하는 것이 아니라 동일 BSS 내에 있는 AP들과 장치들이 서로 통신이 가능한 구조 (하나의 AP만을 기반으로 구축 → 사용자가 이동하며 네트워크에 접속하는 것이 불가능함)
      * ESS: 하나 이상의 연결된 BSS 그룹, 장거리 무선 통신을 제공하며 BSS보다 더 많은 가용성과 이동성 지원 (사용자가 이동하며 중단 없이 네트워크 계속 연결 가능)
   
  ## PDU
  <p align="center">
  <img width="823" alt="Screenshot 2023-05-27 at 5 34 52 PM" src="https://github.com/GDSC-SWU/2023-CS-Study/assets/63540652/105f9e15-b314-49e8-9660-c394ec46da2a">
  </p>
  
 







 
