## 2-1. 네트워크의 기초


* 네트워크 : 노드(node)와 링크(link)가 서로 연결되어 있으며 리소스를 공유하는 집합
  * 노드란 서버, 라우터, 스위치등 네트워크 장치를 의미 / 링크는 유무선을 의미

### 2.1.1 처리량과 지연 시간


* 좋은 네트워크란, 많은 처리량을 처리할 수 있으며 지연 시간이 짧고 장애 빈도가 적으며 좋은 보안을 갖춘 네트워크

* **처리량**
  * 처리량은 링크 내에서 성공적으로 전달된 데이터의 양을 말함. 보통 얼만큼의 트래픽을 처리했는지를 나타냄
  * 많은 트래픽을 처리 = 많은 처리량을 가짐
  * 트래픽은 특정 시점에 링크 내에 프르는 데이터의 양을 말함
 
* **지연 시간**
  * 지연 시간 : 요청이 처리되는 시간. 어떤 메세지가 두 장치 사이를 왕복하는데 걸린 시간


### 2.1.2 네트워크 토폴로지와 병목 현상


* **네트워크 토폴로지**
  * 네트워크 토폴로지 : 노드와 링크가 어떻게 배치되어 있는지에 대한 방식이자 연결 형태를 의미
  * 트리 토폴로지 : 계층형 토폴로지. 트리 형태로 배치한 네트워크 구성. 노드의 추가/삭제가 쉬우며 특정 노드에 트래픽이 집중될 때 하위노드에 영향을 끼칠 수 있음
  * 버스 토폴로지 : 중앙통신 회선 하나에 여러 개의 노드가 연결되어 공유하는 네트워크. 근거리 통신망(LAN)에서 사용. 성치 비용이 적고 신뢰성 우수. 그러나 스푸핑 문제 有
    * 스푸핑 : 올바르게 수신부로 가야 할 패킷이 악의적인 노드에 전달
  * 스타 토폴로지 : 중앙에 있는 노드에 모두 연결된 네트워크 구성. 노드 추가와 에러 탐지가 쉽고 패킷의 충돌 발생 가능성이 낮음. 그러나 중앙 노드에 장애가 발생하면 전체 네트워크를 사용할 수 없고 설치 비용이 고가
  * 링형 토폴로지 : 각각의 노드가 양 옆의 두 노드와 연결. 전체적으로 고리처럼 하나의 연속된 길을 통해 통신을 하는 망 구성 방식
  * 메시 토폴로지 : 망형토폴로지라고도 하며, 그물망처럼 연결되어 있는 구조. 한 단말 장치에 장애가 발생해도 여러 개의 경로가 존재하므로 네트워크 계속 사용 가능. 트래픽 분산 처리 가능. 단, 노드의 추가가 어렵고 구축 비용과 운용 비용이 고가인 단점 존재.
 
* **병목 현상**
  * 병목 현상을 찾을 때 토폴로지가 중요한 기준이 되기 때문에 중요.
  * 네트워크가 어떤 토폴로지를 갖는지, 어떤 경로로 이루어져 있는지 알아야 병목 현상 올바르게 해결 가능
 
 
### 2.1.3 네트워크 분류


* LAN
  * 근거리 통신망을 의미. 전송 속도가 빠르고 혼잡하지 않음.
* MAN
  * 대도시 지역 네트워크. 전송 속도는 평균이고 LAN보다는 더 많이 혼잡.
* WAN
  * 광역 네트워크를 의미. 전송 속도는 낮고 MAN보다 더 혼잡.


### 2.1.4 네트워크 성능 분석 명령어


* 네트워크 병목 현상의 주된 원인
  1. 네트워크 대역폭
  2. 네트워크 토폴로지
  3. 서버 CPU, 메모리 사용량
  4. 비효율적인 네트워크 구성
 
* ping
  * 네트워크 상태를 확인하려는 대상 노드를 향해 일정 크기의 패킷을 전송하는 명령어
  * 이를 통해 해당 노드의 패킷 수신 상태와 도달하기까지 시간 등을 알 수 있으며 해당 노드까지 네트워크가 잘 연결되어있는지 확인.
  * TCP/IP 프로토콜 중 ICMP 프로토콜을 통해 동작
 
* netsat
  * 접속되어 있는 서비스들의 네트워크 상태를 표시하는데 사용.
  * 주로 서비스의 포트가 열려 있는지 확인할 때 사용
 
* nslookup
  * DNS에 관련된 내용을 확인하기 위해 쓰는 명령어.
  * 특정 도메인에 매핑된 IP를 확인하기 위해 사용
 
* tracert
  * 목적지 노드까지 네트워크 경로를 확인할 때 사용하는 명령어.
  * 어느 구간에서 응답 시간이 느려지는지 등 확인 가능.


### 2.1.5 네트워크 프로토콜 표준화

* 네트워크 프로토콜 : 다른 장치들끼리 데이터를 주고받기 위해 설정된 공통된 인터페이스


## 2-2. TCP/IP 4계층 모델

### 2.2.1 계층 구조

#### * TCP/IP 4계층과 OSI 7계층 비교
  * TCP/IP 4계층 - 애플리케이션 계층, 전송 계층, 인터넷 계층, 링크 계층
  * OSI 7계층 - 애플리케이션 계층, 프레젠테이션 계층, 세션 계층, 전송 계층, 네트워크 계층, 데이터 링크 계층, 물리 계층

* 애플리케이션 계층
  * FTP, HTTP, SSH, SMTP, DNS등 응용 프로그램이 사용되는 프로토콜 계층
  * 이메일, 웹서비스 등 서비스를 실질적으로 사람들에게 제공하는 층

* 전송계층
  * 송신자와 수신자를 연결하는 통신 서비스를 제공
  * 연결 지향 데이터 스트림 지원, 신뢰성, 흐름 제어를 제공할 수 있으며 애플리케이션과 인터넷 계층 사이의 데이터가 전달될 때 중계 역할을 함
  * 대표적으로 TCP, UDP가 있음
    * TCP : 패킷 사이의 순서를 보장하고 연결지향 프로토콜을 사용해 연결. 신뢰성을 구축해 수신 여부를 확인하며 가상회선 패킷 교환 방식 사용
      * 가상회선 패킷 교환 방식 : 각 패킷에 가상회선 식별자가 포함되며 모든 패킷을 전송하면 가상회선이 해제되고 패킷들은 전송된 순서대로 도착
    * UDP : 순서를 보장하지 않고 수신 여부를 확인하지 않음. 단순히 데이터만 주는 데이터그램 패킷 교환 방식 사용
      * 데이터그램 패킷 교환 방식 : 패킷이 독립적으로 이동하며 최적의 경로를 선택해 감. 하나의 메시지에서 분할된 여러 패킷은 서로 다른 경로로 전송될 수 있으며 도착한 순서가 다를 수 있는 방식.
  * TCP 연결 성립 과정 : 신뢰성을 확보할 때 3-way handshake라는 작업 진행. 이 과정이 있어 TCP는 신뢰성이 있고 UDP는 신뢰성이 없음
  * TCP 연결 해제 과정 : 4-way handshake 과정 발생

* 인터넷 계층
  * 장치로부터 받은 네트워크 패킷을 IP 주소로 지정된 목적지로 전송하기 위해 사용되는 계층
  * IP, APR, ICMP 등이 있음. 상대방이 제대로 받았는지에 대해 보장하지 않는 비연결형적인 특징을 가짐
  
* 링크 계층(=네트워크 접근 계층)
  * 전선, 광섬유, 무선 등으로 실질적으로 데이터를 전달하며 장치 간에 신호를 주고받는 규칙을 정하는 계층

* 계층 간 데이터 송수신 과정
  1. 애플리케이션 계층에서 전송 계층으로 보내는 요청(request)값들이 캡슐화 과정을 거쳐 전달
  2. 다시 링크 계층을 통해 해당 서버와 통신을 하고
  3. 해당 서버의 링크 계층으로부터 애플리케이션까지 비캡슐화 과정을 거쳐
  4. 데이터 전송

* 캡슐화 과정
  * 상위 계층의 헤더와 데이터를 하위 계층의 데이터 부분에 포함시키고 해당 계층의 헤더를 삽입하는 과정

* 비캡슐화 과정
  * 하위 계층에서 상위 계층으로 가며 각 계층의 헤더 부분을 제거하는 과정


### 2.2.2 PDU

* PDU : 네트워크의 어떠한 계층으로 데이터가 전달될 때 한 덩어리의 단위
  * 헤더 : 제어 관련 정보들이 포함
  * 페이로드 : 데이터를 의미
  * 애플리케이션 계층 : 메시지
  * 전송 계층 : 세그먼트(TCP), 데이터그램(UDP)
  * 인터넷 계층 : 패킷
  * 링크 계층 : 프레임(데이터 링크 계층), 비트(물리 계층)
  

## 2-3. 네트워크 기기


### 2.3.1 네트워크 기기의 처리 범위

* 애플리케이션 계층 : L7 스위치
* 인터넷 계층 : 라우터, L3 스위치
* 데이터 링크 계층 : L2 스위치, 브리지
* 물리 계층 : NIC, 리피터, AP


### 2.3.2 애플리케이션 계층을 처리하는 기기

* L4, L7 스위치 차이
  * L4 스위치
    * 전송 계층을 처리하는 기기
    * 스트리밍 관련 서비스에서 사용불가
    * IP와 포트를 기반으로 트래픽 분산
  * L7 스위치
    * 로드밸런서라고 하며 서버의 부하를 분산하는 기기
    * URL, 서버, 캐시, 쿠키들을 기반으로 트래픽 분산
    * 바이러스, 불필요한 외부 데이터 등을 걸러내는 필터링 기능 有, 응용 프로그램 수준의 트래픽 모니터링도 가능
    * if 장애가 발생한 서버가 있다면? -> 트래픽 분산 대상에서 제외
* 헬스체크
  * 헬스체크를 통해 스위치에서 정상적인 서버 또는 비정상적인 서버를 판별
  * 전송 주기와 재전송 횟수 등을 설정한 이후 반복적으로 서버에 요청을 보냄
* 로드밸런서 : 서비스를 안정적으로 운용하기 위해 서버 이중화 기능을 제공

### 2.3.3 인터넷 계층을 처리하는 기기

* 라우터
  * 여러 개의 네트워크를 연결, 분할, 구분시켜주는 역할
  * 다른 네트워크에 존재하는 장치끼리 서로 데이터를 주고받을 때 패킷 소모를 최소화하고 경로를 최적화하여 최소 경로를 패킷으로 포워딩하는 기능
* L3 스위치
  * L2 스위치의 기능과 라우팅 기능을 갖춘 장비를 말함
  * 라우터라고 봐도 무방

### 2.3.4 데이터 링크 계층을 처리하는 기기

* L2 스위치
  * 장치들의 MAC주소를 MAC 주소 테이블을 통해 관리하며 연결된 장치로부터 패킷이 왔을 때 피킷 전송을 담당
* 브리지
  * 두 개의 근거리 통신망(LAN)을 상호 접속할 수 있도록 하는 통신망 연결 장치
  * 포트와 포트 사이의 다리 역할

### 2.3.5 물리 계층을 처리하는 기기

* NIC
  * 2대 이상의 컴퓨터 네트워크를 구성하는 데 사용
  * 네트워크와 빠른 속도로 데이터를 송수신 할 수 있도록 컴퓨터 내에 설치하는 확장 카드
* 리피터
  * 약해진 들어오는 신호 정도를 증폭해 다른 쪽으로 전달하는 장치
  * 패킷이 더 멀리 갈 수 있으나 광케이블이 보급됨에 따라 현재는 잘 쓰이지 않는 장치
* AP
  * 패킷을 복사하는 기기
